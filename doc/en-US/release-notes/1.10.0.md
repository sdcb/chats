<!-- Language: en-US -->
<p><a href="./README.md">ğŸ“‹ All Versions</a> <span style="float:right"><b>English</b> | <a href="../../zh-CN/release-notes/1.10.0.md">ç®€ä½“ä¸­æ–‡</a></span></p>

# Chats 1.10.0 Release Notes

> Release Date: 2026-01-14 (111 commits since main)

1.10.0 is a major capability upgrade centered around the **built-in Code Interpreter (Docker sandbox)**. It introduces the `sdcb/code-interpreter` default image and CI pipeline, adds backend session management with security/resource controls, and improves the frontend experience for tool calls, file upload/preview, generation info, and admin pages. It also extends **Interleaved Thinking** support (reasoning content carried across tool calls) and makes Chat Completions API compatible with DeepSeek v3.2-style `reasoning_content`.

## ğŸ¯ Core Features

### 1) Built-in Docker Code Interpreter (Sandboxed Execution)

- ğŸ³ **Built-in toolset**: Docker-based tools for executing commands and manipulating files in a session (`create_docker_session` / `run_command` / `read_file` / `write_file` / `patch_file` / `download_chat_files` / `destroy_session`).
- ğŸ“¦ **Default image `sdcb/code-interpreter`**: Pre-installed with common toolchains (dotnet/python/node/gcc/sqlite3), document/media utilities (LibreOffice/Pandoc/Poppler, FFmpeg), Playwright Chromium, fonts, ImageMagick, and `anthropics/skills` (`/app/skills` + `/app/skills.md`).
- ğŸ” **Security & limits**: Per-session resource limits (memory/CPU/pids), timeouts, idle expiration, and network mode allow-list (`DefaultNetworkMode` / `MaxAllowedNetworkMode`).
- ğŸ§¾ **Traceable sessions**: Persisted `ChatDockerSession` records and best-effort cleanup of expired containers (`ChatDockerSessionCleanupService`).
- ğŸ“ **Cloud files â†’ container**: Only injects cloud files relevant to the current turn, and supports wildcard downloads into `/app` via `download_chat_files`, with `/app/artifacts` for user-downloadable outputs.

### 2) Interleaved Thinking Expansion

- ğŸ§  **More providers support reasoning across tool calls**: Moonshot (Kimi) and others improve interleaved `reasoning_content` round-tripping in Chat Completions API.
- ğŸ” **DeepSeek v3.2 compatibility (Chat Completions)**: Parses/persists assistant `reasoning_content` and composes stable thinkâ€“toolâ€“think flows (`NeutralConversions` / `ChatCompletionService`).
- ğŸ§© **Responses API (OpenAI / Azure AI Foundry) interleaved thinking**: When reasoning is enabled, requests include `include: ["reasoning.encrypted_content"]`. The streaming handler extracts `encrypted_content` from `response.output_item.done` and stores it into `ThinkChatSegment.Signature`, then replays it in the next request as `{"type":"reasoning","encrypted_content":...}` to support multi-step tool-call flows (`ResponseApiService` / `AzureResponseApiService`; unit tests: `src/BE/tests/Chats.BE.UnitTest/ChatServices/Response/AzureResponseApiServiceTests.cs`).
  Cache hit rate is also improved via `prompt_cache_key` (end-user keyed).

### 3) Frontend Improvements

- ğŸ§° **ToolCallBlock UX**: Cleaner display for Code Interpreter tools (command summary, sessionId/timeout metadata, streaming progress output, copy buttons, auto-collapse behavior, long output handling) (`src/FE/components/Markdown/ToolCallBlock.tsx`).
- ğŸ“ **Upload experience**: Drag & drop and Ctrl+V paste upload, with optional â€œallow all file typesâ€ for Code Interpreter scenarios (`DragUpload` / `PasteUpload` / `ChatInput`).
- ğŸ–¼ï¸ **Preview & sharing**: Better file preview behavior (no filename truncation), improved shared chat UI, and copy-share-link support.
- ğŸ“Š **Generation info**: Turn info bubble shows step count and averages (duration / TTFB), hiding step count when only one step exists (`TurnInfoBubble`).
- ğŸ—“ï¸ **Admin pages**: Dashboard date selector improvements (today highlight + quick ranges) and usage page refresh button.

## â¬†ï¸ Upgrade Notes

- Run DB migration: `src/scripts/db-migration/1.10/1.10.0.sql`
- Ensure Docker is available in deployment, and configure `CodeInterpreter` in `src/BE/web/appsettings.json` as needed (image, network modes, resource limits, upload limits)
