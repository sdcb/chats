<!-- Language: en-US -->
<p align="right"><b>English</b> | <a href="../../zh-CN/release-notes/1.5.md">简体中文</a></p>

# Chats 1.5 Release Notes

> Release date: 2024-05-20 (14 commits since 1.4.0.815)

Version 1.5 focuses on stability improvements and user experience optimization. It introduces support for Qwen3 models, optimizes file handling and UI display, and fixes several issues affecting user experience.

## Highlights

- Added Qwen3 model support with configurable thinking chain feature
- Optimized file caching: database indexing for better performance, improved download logic
- Enhanced UI: better icon display in dark theme, improved code/raw content toggle
- Fixed critical issues: image generation, file sharing, encryption/decryption
- Upgraded dependencies to latest versions for improved stability

---

## What's New

### 1) Model Support

#### Qwen3 Models
- **New Support**: Added support for Qwen3 series models
- **Thinking Chain Control**: Allow disabling the thinking chain (reasoning) feature for Qwen3 models
- **Documentation**: Added notes in the supported model providers list

### 2) File Handling Optimization

#### File Caching & Downloads
- **Database Optimization**: Added index to `UserApiCache` table to improve query performance when using `/v1-cached` API gateway
- **Download Logic Improvements**:
  - Unified all file downloads through `api/file/private` endpoint
  - Optimized browser caching mechanism - images already downloaded by users won't be re-downloaded within a certain period
  - Fixed shared file access issues

#### Image Display
- **Fixed gpt-image-1 Issue**: Resolved "Unknown Error" when using gpt-image-1 model with local file service
- **Raw/Preview Toggle**:
  - Changed "Code" label to more accurate "Raw" in UI
  - Display raw format content with monospace font (`font-mono`)
  - Fixed display issues when switching between raw content and preview mode

### 3) UI/UX Optimization

#### Interface Style Improvements
- **Dark Theme**: Optimized OpenAI icon color display in dark theme for better visual consistency
- **User Model Dialog**: Improved the style of edit user model dialog for better user experience

### 4) Security & Stability

#### Exception Handling
- **Encryption/Decryption**: Improved exception messages when decryption fails, providing clearer error information for easier troubleshooting

#### Dependency Updates
- **Package Updates**: Upgraded all dependencies to latest versions, fixing known security vulnerabilities and bugs
- **Stability Improvements**: Enhanced overall system stability and performance through dependency upgrades

---

## Version History

### 1.5.4 (2024-05-24)
- Fixed "Unknown Error" issue with gpt-image-1 model in local file service

### 1.5.3 (2024-05-23)
- Optimized OpenAI icon color in dark theme
- Fixed OpenAI chat service issues
- Improved exception messages for decryption failures
- Optimized edit user model dialog style
- Added database index to UserApiCache
- Fixed shared file access issues
- Unified file downloads through api/file/private endpoint
- Fixed raw/preview toggle issue, using monospace font

### 1.5.0 (2024-05-20)
- Added notes in supported model providers
- Bumped version to 1.5
- Allow disabling thinking chain for Qwen3 models
- Upgraded dependencies
- Added Qwen3 model support

---

## Upgrade Guide

This is a smooth upgrade with no breaking changes. All users are encouraged to upgrade for better stability and user experience.

### Upgrade Steps

1. Backup your current database (recommended but not required)
2. Stop the running Chats service
3. Replace with the new version files
4. Start the service

### Notes

- On first startup, an index will be automatically added to the `UserApiCache` table, which may take a few seconds
- If using Qwen3 models, you can configure whether to enable the thinking chain feature in model settings
- After the file caching optimization, user experience will be smoother

---

## Known Issues

None

---

## Acknowledgments

Thanks to all users for their feedback and suggestions, helping us continuously improve the Chats project.

For issues or suggestions, please report via [GitHub Issues](https://github.com/sdcb/chats/issues).
