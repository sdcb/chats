<!-- Language: zh-CN -->
<p><a href="./README.md">📋 所有版本</a> <span style="float:right"><a href="../../en-US/release-notes/1.5.md">English</a> | <b>简体中文</b></span></p>

# Chats 1.5 发布说明

> 发布日期：2024-05-20（相对 1.4.0.815 以来 14 次提交）

1.5 是一个专注于稳定性改进和用户体验优化的版本，新增了对通义千问3模型的支持，优化了文件处理和UI展示，并修复了多个影响用户使用的问题。

## 亮点概览

- 新增通义千问3（Qwen3）模型支持，可禁用推理思考链功能
- 优化文件缓存机制：添加数据库索引提升性能，改进文件下载逻辑
- 增强UI体验：优化暗色主题下的图标显示，改进代码/原始内容切换
- 修复多个关键问题：图片生成、文件共享、加密解密等
- 升级依赖包到最新版本，提升系统稳定性

---

## 新功能与改进详情

### 1) 模型支持

#### 通义千问3（Qwen3）模型
- **新增支持**：添加对通义千问3系列模型的支持
- **思考链控制**：允许禁用 Qwen3 模型的推理思考链（thinking）功能
- **说明补充**：在支持的模型提供商列表中添加了相关使用说明

### 2) 文件处理优化

#### 文件缓存与下载
- **数据库优化**：为 `UserApiCache` 表添加索引，提升使用 `/v1-cached` API 网关时的查询性能
- **下载逻辑改进**：
  - 统一所有文件下载通过 `api/file/private` 接口处理
  - 优化浏览器缓存机制，用户下载过的图片在一定时间内不会重复下载
  - 修复共享文件的访问问题

#### 图片显示相关
- **修复 gpt-image-1 问题**：解决了在本地文件服务中使用 gpt-image-1 模型时出现的"Unknown Error"错误
- **原始/预览切换**：
  - 将 UI 中的"Code"标签改为更准确的"Raw"
  - 使用等宽字体（`font-mono`）显示原始格式内容
  - 修复原始内容与预览模式切换时的显示问题

### 3) UI/UX 优化

#### 界面样式改进
- **暗色主题**：优化了 OpenAI 图标在暗色主题下的颜色显示，提升视觉一致性
- **用户模型对话框**：优化编辑用户模型对话框的样式，提升操作体验

### 4) 安全性与稳定性

#### 异常处理
- **加密解密**：改进了解密失败时的异常信息，提供更清晰的错误提示，便于问题排查

#### 依赖升级
- **包更新**：升级所有依赖包到最新版本，修复已知的安全漏洞和bug
- **稳定性提升**：通过依赖升级提升整体系统的稳定性和性能

---

## 版本历史

### 1.5.4 (2024-05-24)
- 修复本地图片服务 gpt-image-1 模型的"Unknown Error"问题

### 1.5.3 (2024-05-23)
- 优化暗色主题下的 OpenAI 图标颜色
- 修复 OpenAI 聊天服务问题
- 改进解密失败时的异常提示
- 优化编辑用户模型对话框样式
- 为 UserApiCache 添加数据库索引
- 修复共享文件访问问题
- 统一文件下载通过 api/file/private 接口
- 修复原始内容/预览切换问题，使用等宽字体

### 1.5.0 (2024-05-20)
- 在支持的模型提供商中添加使用说明
- 版本号升级到 1.5
- 允许禁用 Qwen3 模型的思考链功能
- 升级所有依赖包
- 新增通义千问3（Qwen3）模型支持

---

## 升级说明

此版本为平滑升级，无破坏性变更。建议所有用户升级以获得更好的稳定性和用户体验。

### 升级步骤

1. 备份当前数据库（推荐但非必需）
2. 停止当前运行的 Chats 服务
3. 替换为新版本的程序文件
4. 启动服务

### 注意事项

- 首次启动时会自动为 `UserApiCache` 表添加索引，可能需要几秒钟时间
- 如果使用 Qwen3 模型，可以在模型配置中选择是否启用思考链功能
- 文件缓存机制优化后，用户体验将更加流畅

---

## 已知问题

无

---

## 致谢

感谢所有用户的反馈和建议，帮助我们不断改进 Chats 项目。

如有问题或建议，欢迎通过 [GitHub Issues](https://github.com/sdcb/chats/issues) 反馈。
