<!-- Language: zh-CN -->
<p align="right"><a href="../../en-US/release-notes/1.3.md">English</a> | <b>简体中文</b></p>

# Chats 1.3 发布说明

> 发布日期：2024-04-25
> 
> 版本：1.3.0.791（r791）→ 1.3.1.794（r794）

1.3 版本专注于增强图像生成能力和百度文心模型集成，带来了 Azure OpenAI gpt-image-1 模型的完整支持、百度 ERNIE 新模型的集成，以及一系列图像处理功能改进。

## 版本概览

- **1.3.0**：图像生成功能大幅增强，支持 gpt-image-1 模型、文件管理功能、百度 ERNIE 新模型
- **1.3.1**：修复密码修改功能的关键问题

---

## 新功能与改进

### 1) Azure OpenAI gpt-image-1 模型支持

全面支持 Azure OpenAI 最新的 gpt-image-1 图像生成模型，包括：

- **多图像生成**：单次请求可生成多张图片（最多 10 张）
- **图像编辑**：支持基于文本描述的图像编辑功能
- **掩码重绘**：使用掩码（mask）对图像进行精准的局部重绘
- **质量控制**：可配置图像质量等级（低、中、高）
- **文件名提取**：自动从下载链接中提取有意义的文件名

技术实现：
- 利用 `maxOutputTokenCount` 参数控制生成图像数量
- 图像编辑和生成的默认数量统一为 1 张
- 并行下载多张图像，提升下载效率

### 2) 百度 ERNIE 模型集成

新增百度最新发布的 ERNIE 系列模型：

**ERNIE Turbo 4.5 系列**：
- **ERNIE Turbo 4.5 (32k)**：支持 32k 上下文长度
- **ERNIE Turbo 4.5 (128k)**：支持 128k 超长上下文
- **ERNIE Turbo 4.5-VL**：视觉语言多模态模型

**ERNIE X1 系列**：
- **ERNIE X1 Turbo**：支持思维链（Chain of Thought）推理能力，提供更清晰的推理过程和结构化输出

### 3) 文件管理功能

新增文件管理支持，为未来的文档处理和多模态功能奠定基础：
- 文件上传、存储和管理
- 文件访问控制
- 为后续版本的文档分析功能做准备

### 4) 图像处理优化

- **并行下载**：支持并行下载多张生成的图像，显著提升用户体验
- **默认参数优化**：统一图像生成和编辑的默认数量为 1，避免意外产生多张图片
- **文件名优化**：自动从图像链接中提取有意义的文件名，便于管理

---

## 问题修复

### 1.3.1 版本修复

- **修复密码修改功能**：解决了用户无法修改密码的关键问题（#90）

---

## 数据更新

更新了模型基础数据（BasicData），包含：
- ERNIE 系列新模型的配置和参数
- gpt-image-1 模型的完整配置信息

---

## 升级说明

### 从 1.2.x 升级

1. 停止当前运行的服务
2. 备份数据库（推荐）
3. 替换二进制文件或更新 Docker 镜像
4. 启动服务，系统将自动更新数据库架构

### Docker 用户

```bash
# 拉取最新镜像
docker pull sdcb/chats:1.3.1.794-linux-x64

# 或使用 latest 标签
docker pull sdcb/chats:latest
```

---

## 技术细节

### 主要提交记录

1. `a4ea10b7` - 添加 gpt-image-1 图像生成模型支持
2. `c089a256` - 添加文件管理支持
3. `ab0fc399` - gpt-image-1 支持多图像和掩码功能
4. `16ab92ad` - 添加 ERNIE X1/4.5 相关模型
5. `2f2d0e00` - 更新 ERNIE 和 gpt-image-1 的基础数据
6. `245d3283` - 修复无法修改密码的问题

### API 变更

- 图像生成 API 现在支持 `count` 参数（通过 `maxOutputTokenCount` 实现）
- 文件管理相关的新 API 端点

---

## 致谢

感谢社区用户的反馈和贡献，特别是：
- 报告密码修改问题的用户
- 测试 gpt-image-1 新功能的早期用户

如果您在使用过程中遇到任何问题或有建议，欢迎在 [GitHub Issues](https://github.com/sdcb/chats/issues) 提交反馈。

---

## 下一步计划

- 持续优化图像生成体验
- 增强文件管理功能
- 扩展多模态能力
- 集成更多 AI 模型

---

<p align="center">
  <b>Chats - 开源 AI 聊天平台</b><br>
  <a href="https://github.com/sdcb/chats">GitHub</a> •
  <a href="https://github.com/sdcb/chats/issues">报告问题</a> •
  <a href="https://github.com/sdcb/chats/discussions">讨论</a>
</p>
