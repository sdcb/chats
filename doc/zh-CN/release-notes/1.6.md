<!-- Language: zh-CN -->
<p><a href="./README.md">📋 所有版本</a> <span style="float:right"><a href="../../en-US/release-notes/1.6.md">English</a> | <b>简体中文</b></span></p>

# Chats 1.6 发布说明

> 发布日期：2024-06-30（相对 1.5.4.844 以来约 60 次提交）

1.6 版本是一个重要的更新，带来了 .NET 9 升级、推理模型支持增强、图片上传功能改进、OpenAI 兼容性提升以及大量用户体验优化和问题修复。

## 亮点概览

- 升级至 .NET 9：全面升级到最新的 .NET 9 框架，提升性能与安全性
- 推理模型增强：新增对 o3-pro、o4-mini、Gemini Think 等推理模型的支持与优化
- 图片功能改进：支持历史图片上传、手机拍照上传、图片编辑模型选择、3:2/2:3 强制比例
- 新模型支持：GPT-5 系列、Qwen3 系列、GLM-4.5 系列、Kimi 新模型、Grok-4、Codex-mini
- OpenAI 兼容性：响应 API JSON Schema 问题修复、状态码改进、EndUserId 问题修复
- Azure 部署：新增一键部署脚本，简化 Azure 环境部署流程
- 用户体验：全屏快捷键、选中消息处理优化、UI 细节改进
- 部署优化：切换至 R2 存储、Ubuntu 22.04、构建超时调整

---

## 版本详情

### 1.6.9

**发布日期**：2025-09-17

**图片功能增强**：
- 支持强制 3:2 和 2:3 图片比例
- 图片编辑时可选择模型

### 1.6.8

**发布日期**：2025-09-09

**推理模型优化**：
- 修复 GPT-5 响应 API 稳定性问题
- 为 GPT-5 添加可靠的错误消息提示
- 修复 Gemini-2.5-Pro 在低推理级别下的问题
- 将 Google AI 推理级别 low 映射为 1024 tokens
- 修复 GPT-5-chat 兼容性问题

**文档更新**：
- 更新 README 文档

### 1.6.7

**发布日期**：2025-09-04

**存储与部署优化**：
- 全面迁移至 Cloudflare R2 存储
- 从 MinIO 切换到 R2
- 修复 AWS S3 cp 命令
- 优化部署流程
- 添加缺失的凭证配置

### 1.6.6

**发布日期**：2025-08-28

**SDK 整合**：
- 移除 Azure OpenAI .NET SDK
- 整合 OpenAI SDK，统一接口调用

### 1.6.5

**发布日期**：2025-08-23

**新功能**：
- Azure 一键部署脚本（#92）：简化在 Azure 环境中的部署流程

**问题修复**：
- 修复响应 API JSON Schema 问题
- 增加构建超时时间至 2 小时

### 1.6.4

**发布日期**：2025-08-18

**新模型支持**：
- 新增 Kimi 新模型支持
- Grok-4 已就绪并可使用

**版本升级**：
- 版本号提升至 1.6.4

### 1.6.3

**发布日期**：2025-08-12

**推理模型增强**：
- 优化 o3-pro 推理摘要功能
- 为 o3-pro 启用异步 API
- 新增 codex-mini 模型
- 新增多个最新模型支持

**问题修复**：
- 修复 o3/o4-mini 无法接受图片输入的问题
- 修复 gpt-image-1 EndUserId 问题

**用户体验**：
- 支持 Google Gemini Think 推理功能
- 在 OpenAI 兼容 SDK 中返回状态码

### 1.6.2

**发布日期**：2025-08-05

**用户体验改进**：
- 新增全屏快捷键功能（Ctrl+F）
- 修改全屏组合键为 Ctrl+F
- 选中已选中的消息不再设置 leaf id

**问题修复**：
- 修复编辑用户模型的问题

**基础设施**：
- 升级至 OpenAI 220 版本
- 优化部署配置文件

### 1.6.1

**发布日期**：2025-07-28

**新模型支持**：
- 原生支持 GPT-5 系列模型
- 原生支持 Qwen3 系列模型
- 原生支持 GLM-4.5 系列模型

**基础设施**：
- 切换至 Ubuntu 22.04
- 升级至 .NET 9 框架

### 1.6.0

**发布日期**：2025-06-30

**图片功能改进**：
- 支持历史图片上传：可在聊天历史中上传和查看图片
- 上传按钮支持拍照：从手机摄像头直接拍照上传
- 优化上传按钮的拍照功能

**用户体验优化**：
- 优化聊天输入界面
- 优化整体 UI 设计
- 全屏书写时隐藏滚动按钮

**问题修复**：
- 修复导致加载更多聊天失败的问题
- 修复 gpt-image-1 图片响应缓慢的问题

---

## 技术改进

### 框架升级
- **全面升级至 .NET 9**：利用最新的 .NET 9 特性，提升应用性能、安全性和开发体验

### 推理模型支持
- **o3-pro 系列优化**：推理摘要优化、异步 API 支持
- **o3/o4-mini**：修复图片输入支持问题
- **Gemini Think**：支持 Google 的 Gemini Think 推理功能，推理级别映射优化

### OpenAI 兼容性
- **JSON Schema**：修复响应 API 中的 JSON Schema 兼容性问题
- **状态码返回**：在 OpenAI 兼容 SDK 中正确返回状态码
- **GPT-5 系列**：完善对 GPT-5、GPT-5-chat 的原生支持
- **EndUserId**：修复 gpt-image-1 的 EndUserId 问题

### 图片处理
- **比例控制**：支持强制 3:2 和 2:3 的图片比例
- **模型选择**：图片编辑时可以选择具体的模型
- **拍照上传**：移动端支持直接从摄像头拍照上传
- **历史上传**：支持在聊天历史中上传图片

### 部署与基础设施
- **存储迁移**：从 MinIO 迁移至 Cloudflare R2，提升存储性能
- **Azure 一键部署**：新增自动化部署脚本，简化 Azure 环境配置
- **Ubuntu 22.04**：切换至更稳定的 Ubuntu 22.04 LTS
- **构建优化**：增加构建超时至 2 小时，确保大型构建顺利完成

### SDK 整合
- 移除 Azure OpenAI .NET SDK，统一使用 OpenAI SDK
- 简化依赖关系，降低维护成本

---

## 新增模型

- **GPT-5 系列**：gpt-5、gpt-5-chat 等
- **Qwen3 系列**：最新的通义千问 3 代模型
- **GLM-4.5 系列**：智谱 AI 最新模型
- **Kimi 新模型**：Moonshot AI 新增模型
- **Grok-4**：xAI 最新推理模型
- **Codex-mini**：代码生成专用模型
- **Gemini Think**：Google 推理模型

---

## 用户体验改进

### 聊天界面
- 优化聊天输入框 UI 设计
- 全屏书写时自动隐藏滚动按钮
- 整体 UI 细节优化

### 快捷键
- 新增全屏快捷键：Ctrl+F

### 消息操作
- 选中已选中的消息不再重复设置 leaf id，避免不必要的操作

---

## 问题修复

### 聊天功能
- 修复加载更多聊天记录失败的问题
- 修复选中消息处理逻辑

### 图片功能
- 修复 gpt-image-1 图片响应缓慢的问题
- 修复 gpt-image-1 EndUserId 问题
- 修复 o3/o4-mini 无法接受图片输入的问题

### 模型管理
- 修复编辑用户模型时的问题

### API 兼容性
- 修复响应 API JSON Schema 问题
- 修复 GPT-5 响应 API 稳定性
- 修复 Gemini-2.5-Pro 在低推理级别下的问题

---

## 部署说明

### Azure 一键部署

1.6.5 版本新增了 Azure 一键部署脚本，可以快速在 Azure 环境中部署 Chats 应用。详细说明请参考：
- [Azure Bicep 部署文档](../azure-bicep.md)

### 存储配置

从 1.6.7 版本开始，推荐使用 Cloudflare R2 作为对象存储服务。如需配置存储服务，请参考相关文档。

### .NET 9 要求

1.6.1 及以后版本需要 .NET 9 运行时。请确保部署环境已安装 .NET 9。

---

## 升级建议

1. **备份数据**：升级前请务必备份数据库和配置文件
2. **检查依赖**：确保环境已安装 .NET 9 运行时
3. **存储配置**：如使用对象存储，建议迁移至 Cloudflare R2
4. **测试验证**：升级后建议进行完整的功能测试

---

## 已知问题

- GPT-5 响应 API 在某些场景下可能不稳定，团队持续优化中

---

## 致谢

感谢所有贡献者和用户的反馈与支持，使得 1.6 版本得以顺利发布。如有问题或建议，欢迎在 GitHub 上提 Issue。

---

## 相关链接

- [构建文档](../build.md)
- [Azure 部署文档](../azure-bicep.md)
- [1.7 发布说明](1.7.md)
